<?xml encoding="UTF-8"><html lang="en-US"><head><meta charset="UTF-8"><title>Enforce password policy</title></head><body class="front">
		<div id="content">
	<h1>2.4.4 Enforce password policy</h1>
    <h2>Overview</h2>
<p>By default, no password policy is set for users of Bonita BPM. It is therefore highly recommended to set a policy to protect your data.</p>
<p>There are three options:</p>
<ul><li><p>Leave the default setting as is: "non-protected".</p></li>
<li>Apply our ready-to-use policy to a tenant. This requires a password to contain the following:
<ul><li>at least 10 characters long</li>
        <li>at least 2 special characters</li>
        <li>at least 2 upper case characters</li>
        <li>at least 2 lower case characters</li>
        <li>at least 3 digits</li>
    </ul><p>To apply this policy to an existing tenant, edit <code>/bonita/client/platform/tenant/tenants/</code><em><code>tenant-id</code></em><code>/conf/security-config.properties </code>
and change <code>DefaultPasswordValidator</code> to <code>RobustnessPasswordValidator</code>. 
To apply this change to all tenants that you subsequently create, make the same change in <code>/bonita/client/platform/tenant-template/conf/security-config.properties</code>.</p> </li>
<li><p>Create a custom password policy by following the tutorial below.</p></li>
</ul><h2>How to create a custom passord policy</h2>
<p>This will enable the System administrator to create a custom class and define the characteristics for a particular password policy.
It will be applied to all users.</p>

<h3>Prerequisites</h3>
<p>You should have Maven installed to create a project.</p>
<p>Import <strong>Toolkitview</strong> into your workspace.</p>

<h2>How to create a Java class containing your own password validation characteristics</h2>
<p>Here are the steps to add a custom password validator: 

</p><ol><li>Open Maven, and create a new Maven Project. This will create a pom.xml</li>
    <li>Add a new dependency in your pom.xml to get toolkit-view (x.y.z is the Bonita BPM version number).</li>
<code>
  <dependencies><dependency><groupid>org.bonitasoft.web.toolkit</groupid><artifactid>toolkit-view</artifactid><version>x.y.z</version></dependency></dependencies></code>

    <li>Create your class, eg. <code>PasswordLengthValidator</code> with a name for the package, eg. <code>org.bonitasoft.ext.password.validator</code>.</li>
<code>package org.bonitasoft.ext.password.validator;

import static org.bonitasoft.web.toolkit.client.common.i18n.AbstractI18n._;

import org.bonitasoft.web.toolkit.client.common.i18n.AbstractI18n;
import org.bonitasoft.web.toolkit.client.common.i18n.AbstractI18n.LOCALE;
import org.bonitasoft.web.toolkit.client.data.item.attribute.validator.AbstractStringValidator;


/**
 * @author Paul AMAR
 */
public class PasswordLengthValidator extends AbstractStringValidator {

    @Override
    protected void _check(String password) {
        
        LOCALE Locale = AbstractI18n.stringToLocale(locale);

        // Check number of length
        int minimalLength = 10;
        if (password.length() 
    <li>Then, you can build your project. In command-line and type <code>
    mvn package</code></li>

    <li>Go in the <code>
    target/ folder</code> and you have your JAR archive, eg. <code>
    password-validator-0.0.1-SNAPSHOT.jar</code></li>
    <li>Take a bundle and start it once. This will extract the <code>
    bonita.war.</code></li>
    <li>Start it by typing: <code>
    cd bin</code>then 
    <code>./catalina.sh run
    </code></li>

    <li>Copy your JAR archive in the folder <code>
    webapps/bonita/WEB-INF/lib</code></li>

    <li>Modify all <code>
    security-config.properties</code> files to add your new password validator. </li>
e.g. 
<code>
# content of the file
security.password.validator org.bonitasoft.ext.password.validator.PasswordLengthValidator</code>

    <li>Start your bundle again</li>
<code>cd bin
</code>and then <code>
./catalina.sh run</code>

    <li>Create a new user and check that your password policy has been set. </li>
    </code></ol><p>To check that the validation is correct, you can type a password to force an error. An exception will be displayed listing all the criterion non-respected.</p>
<p>If the password respects the criterion in the new password policy, no exception error message will be displayed.</p>
</div>
	</body></html>
