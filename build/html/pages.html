<h1>Pages</h1>
<p>This page explains how to use a page resource (also called a custom page) to the Portal and make it available to users. Page resources are intended for use in applications. You can also use a page resource to customize the portal,
for example:</p>
<ul>
<li>Add a welcome page, with dashboards showing activity in Bonita BPM and related external applications.</li>
<li>Provide a process owner with a dashboard showing the activity of open cases of the process.</li>
<li>Provide a busy user with a filtered view of the task list.</li>
<li>Provide an administrator with a multi-attribute search facility.</li>
<li>Integrate a page from an external application.</li>
<li>Make a report available to users who do not have the Administrator profile.</li>
</ul>
<p>Pages are <a href="resource-management.md">exported. imported, modified, and deleted</a> as resources in Bonita BPM Portal.</p>
<h2>Custom page definition</h2>
<p>A page resource has the general <a href="resource-management.md">resource definition</a>.
If it contains an <code>Index.groovy</code> file, this must implement the PageController interface optionally with libraries.
If you create a custom page with the UI designer, it has the reequired structure and content automatically.</p>
<p>A custom page is displayed inside an iframe to prevent conflicts between the portal resources (for example JS and CSS) and those used in the custom page.
This also reduces the risk of migration issues, for example if a custom page uses the version of JQuery provided with Bonita BPM Portal and it is updated.</p>
<h3>PageController interface</h3>
<pre><code class="language-java">public interface PageController {

/**
* Let the custom page parse request for specific attribute handling.
*
* @param request the HTTP servlet request intended to be used as in a servlet
* @param response the HTTP servlet response intended to be used as in a servlet
* @param pageResourceProvider provide access to the resources contained in the custom page zip
* @param pageContext provide access to the data relative to the context in which the custom page is displayed
*/
public void doGet(HttpServletRequest request, HttpServletResponse response, PageResourceProvider pageResourceProvider, PageContext pageContext);
}
</code></pre>
<h2>Custom page examples</h2>
<p>Two example custom pages are available in the portal. Both examples show how to:</p>
<ul>
<li>Get the Bonita CSS</li>
<li>Write simple HTML code</li>
<li>Get session information, including the locale</li>
<li>Get resources from the custom page definition</li>
<li>Call the Engine Java APIs (in the Groovy example) or the Web REST APIs (in the.md example)</li>
<li>Write a clickable link to an external page</li>
<li>Write a clickable link to a portal page</li>
<li>Write locale-specific messages</li>
</ul>
<p><strong>Groovy example page</strong> defines a custom page using Groovy.
<strong>HTML example page</strong> defines a custom page using only HTML.
In practice, you will probably use a combination of Groovy and HTML to create your custom pages.</p>
<p>To view an example page, publish the page to a custom profile so that you can view it in the portal. To view the source of an example, export the custom page.</p>
<p>On the <a href="https://customer.bonitasoft.com/">Customer Portal</a>, there is also an example in the form of a seed project for creating custom pages using AngularJS and a customizable example task list page.</p>
<h2>Reuse Bonita BPM Portal content</h2>
<p>You can reuse pages from the Bonita BPM Portal in your custom pages. For example, in a page that gives details of a case history, you could include the live case status diagram to show the current status. For example, for case 1 of process definition 8270554088248243867, include these lines in your custom page definition:</p>
<pre><code class="language-groovy">def idProcess = &quot;8270554088248243867&quot;;
def idCase = &quot;1&quot;;
out.write(&quot;&quot;&quot;&lt;iframe src=../portal.js/#/admin/monitoring/${idProcess}-${idCase}&quot; style=&quot;width:100%; height:100%&quot;&gt;&lt;/iframe&gt;&quot;&quot;&quot;);
</code></pre>
<p>This displays the case diagram exactly as it appears in the standard Bonita BPM Portal page. You can modify the view to hide the Portal <strong>Back</strong> button by adding <code>?diagramOnly</code> to the URL:</p>
<pre><code class="language-groovy">out.write(&quot;&quot;&quot;&lt;iframe src=../portal.js/#/admin/monitoring/${idProcess}-${idCase}?diagramOnly}&quot; style=&quot;width:100%; height:100%&quot;&gt;&lt;/iframe&gt;&quot;&quot;&quot;);
</code></pre>
<h3>Debugging a custom page in development</h3>
<p>While you are developing a custom page, you can enable custom page debug mode for your portal. In debug mode, you can see changes to your custom page without importing a new zip archive.</p>
<p>To enable custom page debug mode, edit <a href="BonitaBPM_platform_setup.md"><code>console-config.properties</code></a> and set <code>custom.page.debug</code> to <code>true</code>.</p>
<p>To work on a page in debug mode:</p>
<ol>
<li>Import your custom page zip archive into the portal. This creates a directory <code>&lt;java.io.tmpdir&gt;/bonita_portal_*/tenants/tenant_id/pages/&lt;your custom page&gt;</code>.</li>
<li>Publish the page to a profile, then log out and log in as a user having this profile.</li>
<li>You can now update <code>Index.groovy</code> and the contents of the <code>lib</code> directory directly in <code>&lt;java.io.tmpdir&gt;/bonita_portal_*/tenants/tenant_id/pages/&lt;your custom page&gt;</code>.</li>
<li>To view the page after you modify it, refresh the page in the browser.</li>
</ol>
<p>When you have finished developing the page, recreate the custom page zip archive, and then modify the page to import it. This makes your final version of the page permanently available.</p>
<h2>Constraints</h2>
<p>A custom page is displayed in an iframe in the portal, so is isolated from changes to the portal.
When you migrate to a newer version of Bonita BPM, your custom page definition should still be valid.
However, this cannot be guaranteed for all future migrations.</p>
<h2>Page resources management</h2>
<h3>Page resources</h3>
<p>Custom page resources can be accessed by a <code>PageResourceProvider</code>.</p>
<p>The <code>bonita.css</code> can be retrieved using <code>pageResourceProvider.getBonitaThemeCSSURL()</code></p>
<p>Other <code>css/js</code> resources can be retrieved using <code>pageResourceProvider.getResourceURL(&quot;&lt;path in the custom page resources folder&gt;&quot;)</code></p>
<p>If you are not using Groovy you can directly access a resource by adding a link in <code>index.html</code>.</p>
<p>For example: <code>&lt;link href=&quot;css/file.css&quot; rel=&quot;stylesheet&quot; /&gt;</code></p>
<h3>API acces</h3>
<p>If your page is viewed in a custom profile or in an application, you will have access facilities for <a href="rest-api-overview.md">the portal API</a>.</p>
<p>you will be abble to access the portal API using the following path: &quot;../API/{API name}/{resource name}&quot;</p>
<h3>Theme access</h3>
<p>If your page is viewed in an application, you will have access facilities for <a href="applications.md">the application theme</a>.</p>
<p>You can directly access a resource by adding the following link in <code>index.html</code>: <code>&lt;link href=&quot;../theme/theme.css&quot; rel=&quot;stylesheet&quot; /&gt;</code></p>
