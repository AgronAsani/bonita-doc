<h1>Enforce password policy</h1>
<h2>Overview</h2>
<p>By default, no password policy is set for users of Bonita BPM. It is therefore highly recommended to set a policy to protect your data.</p>
<p>There are three options:</p>
<ul>
<li>Leave the default setting as is: &quot;non-protected&quot;.</li>
<li>Apply our ready-to-use policy to a tenant. This requires a password to contain the following:
<ul>
<li>at least 10 characters long</li>
<li>at least 2 special characters</li>
<li>at least 2 upper case characters</li>
<li>at least 2 lower case characters</li>
<li>at least 3 digits</li>
</ul>
</li>
</ul>
<p>To apply this policy to an existing tenant, edit <code>/bonita/client/platform/tenant/tenants/</code><em><code>tenant-id</code></em><code>/conf/security-config.properties</code>
and change <code>DefaultPasswordValidator</code> to <code>RobustnessPasswordValidator</code>.
To apply this change to all tenants that you subsequently create, make the same change in <code>/bonita/client/platform/tenant-template/conf/security-config.properties</code>.</p>
<ul>
<li>Create a custom password policy by following the tutorial below.</li>
</ul>
<h2>How to create a custom passord policy</h2>
<p>This will enable the System administrator to create a custom class and define the characteristics for a particular password policy.
It will be applied to all users.</p>
<h3>Prerequisites</h3>
<p>You should have Maven installed to create a project.</p>
<p>Import <strong>Toolkitview</strong> into your workspace.</p>
<h2>How to create a Java class containing your own password validation characteristics</h2>
<p>Here are the steps to add a custom password validator:</p>
<ol>
<li>Open Maven, and create a new Maven Project. This will create a pom.xml</li>
<li>Add a new dependency in your pom.xml to get toolkit-view (x.y.z is the Bonita BPM version number).</li>
</ol>
<pre><code class="language-xml">&lt;dependencies&gt;
      &lt;dependency&gt;
          &lt;groupId&gt;org.bonitasoft.web.toolkit&lt;/groupId&gt;
          &lt;artifactId&gt;toolkit-view&lt;/artifactId&gt;
          &lt;version&gt;x.y.z&lt;/version&gt;
      &lt;/dependency&gt;
  &lt;/dependencies&gt;`
</code></pre>
<ol start="3">
<li>Create your class, eg. <code>PasswordLengthValidator</code> with a name for the package, eg. <code>org.bonitasoft.ext.password.validator</code>.</li>
</ol>
<pre><code class="language-java">package org.bonitasoft.ext.password.validator;

import static org.bonitasoft.web.toolkit.client.common.i18n.AbstractI18n._;

import org.bonitasoft.web.toolkit.client.common.i18n.AbstractI18n;
import org.bonitasoft.web.toolkit.client.common.i18n.AbstractI18n.LOCALE;
import org.bonitasoft.web.toolkit.client.data.item.attribute.validator.AbstractStringValidator;
/**
 * @author John Doe
 */
public class PasswordLengthValidator extends AbstractStringValidator {

    @Override
    protected void _check(String password) {
        
        LOCALE Locale = AbstractI18n.stringToLocale(locale);

        // Check number of length
        int minimalLength = 10;
        if (password.length() &lt; minimalLength) {
                addError(_(&quot;Password is not long enough&quot;, Locale));
        }
    }
}
</code></pre>
<ol start="4">
<li>Then, you can build your project. In command-line and type <code>mvn package</code></li>
<li>Go in the <code>target/ folder</code> and you have your JAR archive, eg. <code>password-validator-0.0.1-SNAPSHOT.jar</code></li>
<li>Take a bundle and start it once. This will extract the <code>bonita.war.</code></li>
<li>Start it by typing: <code>cd bin</code>then <code>./catalina.sh run</code></li>
<li>Copy your JAR archive in the folder <code>webapps/bonita/WEB-INF/lib</code></li>
<li>Modify all <code>security-config.properties</code> files to add your new password validator. e.g.</li>
</ol>
<pre><code># content of the file
security.password.validator org.bonitasoft.ext.password.validator.PasswordLengthValidator
</code></pre>
<ol start="10">
<li>Start your bundle again
<code>cd bin</code> and then <code>./catalina.sh run</code></li>
<li>Create a new user and check that your password policy has been set.
To check that the validation is correct, you can type a password to force an error. An exception will be displayed listing all the non-filled criteria.</li>
</ol>
<p>If the password complies with the criteria in the new password policy, no exception error message will be displayed.</p>
