<?xml encoding="UTF-8"><html lang="en-US"><head><meta charset="UTF-8"><title>How to install Red Hat + Oracle JVM + WebLogic + Oracle</title></head><body class="front">
		<div id="content">
	<h1>2.5 How to install Red Hat + Oracle JVM + WebLogic + Oracle</h1>
    <h2>Overview</h2>
<p>This documentation page gives instructions to set up a Bonita BPM platform in a specific environment. This environment
includes the following sets of components:</p>
<ul><li>Operating System: Red Hat Enterprise Linux 6 Server (RHEL)</li>
    <li>Java Virtual Machine: Oracle JVM 7</li>
    <li>Database: Oracle Database 11gR2 (11.2.0.1)</li>
    <li>JEE Application Server: Oracle WebLogic server 12c (12.1.2)</li>
</ul><h2 id="os">Operating System</h2>
<p>No specific configuration is required for RHEL.</p>
<p>Note: you might need to configure a firewall if you want to allow remote connections to the server. You should
probably allow port 7001 for TCP protocol:</p>
<ol><li>Go to <strong>System / Administration / Firewall</strong>.</li>
    <li>Authenticate with the root user password.</li>
    <li>In the left menu, select <strong>Others Ports</strong>.</li>
    <li>Click the <em><strong>Add</strong></em> button.</li>
    <li>Check <strong>User Defined</strong>.</li>
    <li>In <strong>Port / Port Range</strong>, type <code>7001</code>.</li>
    <li>In <strong>Protocol</strong>, select <strong>tcp</strong>.</li>
    <li>Click the <em><strong>OK</strong></em> button.</li>
    <li>Click the  <em><strong>Apply</strong></em> button.</li>
    <li>Close the window.</li>
</ol><h2 id="jvm">Java Virtual Machine</h2>
<p>The instructions below explain how to set up the Oracle Java 7 JDK using the Red Hat official package.</p>
<h3>Prerequisite</h3>
<p>First, you need to add <strong>RHEL EUS Server Supplementary</strong> to your system
<a href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Subscription_Management/1/html/Subscription_Concepts_and_Workflows/index.html">subscriptions</a>.
In fact Oracle Java is provided only in this subscription.
</p>

<p>To install Oracle Java JDK:</p>
<ol><li>Go to System / Administration / Add/Remove Software.</li>
    <li>In the search field, type <code>java-1.7.0-oracle-devel</code>.</li>
    <li>Click the <em><strong>Find</strong></em> button.</li>
    <li>In the package list, select the latest version of <strong>Oracle Java Development Kit</strong>.</li>
    <li>Click the <em><strong>Apply</strong></em> button.</li>
    <li>Type your root user password and click the <em><strong>Authenticate</strong></em> button.</li>
    <li>You can now close the "Add/Remove Software" window.</li>
</ol><h3>Check the Java setup</h3>
<p>To check that Java is correctly set up:</p>
<ol><li>Go to <strong>Applications / System Tools / Terminal</strong>. </li>
<li>In the terminal window, type <code>java -version</code>. You should get something like:
<code>java version "1.7.0_15"
Java(TM) SE Runtime Environment (build 1.7.0_15-b03)
Java HotSpot(TM) 64-Bit
Server VM (build 23.7-b01, mixed mode)</code>
</li>
</ol><h2 id="db">Database</h2>
<h3>DBMS installation</h3>
<p>Follow the standard Oracle Database installation.</p>

<h3>Create a database user</h3>
<ol><li>Execute the following command to create the user:
<code>
CREATE USER bonita_db_user IDENTIFIED BY bonita_db_password
GRANT connect, resource TO bonita_db_user IDENTIFIED BY bonita_db_password
</code>
</li>

<li>Now you will need to perform some specific configuration required by Bonita BPM.
(Usage of transaction (XADataSource) requires extra privileges for the Oracle user used by Bonita BPM). </li>

<li>Grant the appropriate privileges to your user with the following operations:
<code>
GRANT select ON sys.dba_pending_transactions TO bonita_db_user
GRANT select ON sys.pending_trans$ TO bonita_db_user
GRANT select ON sys.dba_2pc_pending TO bonita_db_user
GRANT execute ON sys.dbms_system TO    bonita_db_user
</code>
</li>
</ol><h2 id="as">JEE Application Server</h2>
<h3>Setup</h3>
<ol><li>
To set up WebLogic, you need to know the location of the <strong>Java home folder</strong>. If you set up the Red Hat package of
Oracle JDK 7 64 bits, the Java home folder will be:
<code>/usr/lib/jvm/java-1.7.0-oracle-1.7.0.15.x86_64</code>.
</li>
<li>You just need to follow a standard installation of WebLogic. The Bonita BPM platform doesn't have any specific
needs.</li>
<li>Once the installation of WebLogic is completed, you will need to create a new domain. Make sure you remember the user name
and password, as you will need both later on in the installation guidelines.</li>
<li>At this point you should be able to start WebLogic server and log in to the web administration console. The default address
would be:
<code>http://localhost:7001/console</code>
.
</li>
</ol><h2 id="datasources">Data source declaration</h2>
<p>Here we will configure data sources that are available at a global scope (all applications deployed). For all Bonita BPM Platform systems, you need two data sources, bonitaDS and bonitaSequenceManagerDS. 
If you are using  <a href="/business-data-model-856">business data</a>, you need two additional data sources, BusinessDataDS and NotManagedBizDataDS.</p>


<h3>bonitaDS and BusinessDataDS</h3>

<p>Follow this procedure to configure the bonitaDS datasource, and (optionally) again to configure the BusinessDataDS data source.</p>
<ol><li>Connect to <strong>WebLogic administration console</strong>.</li>
    <li>In the tree menu on the left, go to <strong>Services / Data Sources</strong>.</li>
    <li>Click  New and select <strong>Generic Data Sources</strong>.</li>
	<li> Set
<ul><li>The data source name: bonitaDS (or BusinessDataDS)</li>
    <li>JDNI name: bonitaDS (or BusinessDataDS)</li>
    <li>Database type: Oracle</li>
</ul></li>
<li>Click  <em><strong>Next</strong></em>.</li>
<li>Select <strong>Oracle Driver (Thin XA) for Instance connections; Versions: Any</strong>.</li>
<li>Click  <em><strong>Next</strong></em>.</li>
<li>Click  <em><strong>Next</strong></em> again.</li>
<li>Set the connection:
<ul><li>Database name, e.g.: bonita_db</li>
    <li>Hostname, e.g.: localhost</li>
    <li>Port, e.g.: 1521</li>
    <li>Database user name, e.g.: bonita_db_user</li>
    <li>Database password, e.g.: bonita_db_password</li>
</ul></li>
    <li>Click  <em><strong>Next</strong></em>.</li>
    <li>Click  <em><strong>Test Configuration</strong></em> to confirm that configuration is correct.</li>
    <li>Click  <em><strong>Next</strong></em>.</li>
    <li>Select <strong>AdminServer</strong> to associate your datasource with the default server.</li>
    <li>Click  <strong><em> Finish</em></strong>.</li>

</ol><h3>bonitaSequenceManagerDS and NotManagedBizDataDS</h3>

<p>Follow this procedure to configure the bonitaSequenceManagerDS datasource, and (optionally) again to configure the NotManagedBizDataDS data source.</p>

<ol><li>Connect to <strong>WebLogic administration console</strong>.</li>
    <li>In the tree menu on the left, go to <strong>Services / Data Sources</strong>.</li>
    <li>Click  New and select <strong>Generic Data Sources</strong>.</li>
	<li> Set
<ul><li>The data source name: bonitaSequenceManagerDS (or NotManagedBizDataDS)</li>
    <li>JDNI name: bonitaSequenceManagerDS (or NotManagedBizDataDS)</li>
    <li>Database type: Oracle</li>
</ul></li>
<li>Click  <em><strong>Next</strong></em>.</li>
<li>Select <strong>Oracle Driver (Thin) for Instance connections; Versions: Any</strong>. This data source does not need to be XA.</li>
<li>Click  <strong><em>Next</em></strong>.</li>
<li>Uncheck <em><strong>Supports Global Transactions</strong></em>.</li>
<li>Click  <strong><em>Next</em></strong>. </li>

<li>Set the connection:
<ul><li>Database name, e.g.: bonita_db</li>
    <li>Hostname, e.g.: localhost</li>
    <li>Port, e.g.: 1521</li>
    <li>Database user name, e.g.: bonita_db_user</li>
    <li>Database password, e.g.: bonita_db_password</li>
</ul></li>
    <li>Click  <em><strong>Next</strong></em>.</li>
    <li>Click  <em><strong>Test Configuration</strong></em> to confirm that configuration is correct.</li>
    <li>Click  <em><strong>Next</strong></em>. </li>
    <li>Select <strong>AdminServer</strong> to associate your datasource with the default server.</li>
    <li>Click  <strong><em> Finish</em></strong>.</li>

</ol><h2 id="bonita">Bonita BPM platform</h2>
<ol><li>Download the deploy.zip file from the <a href="http://www.bonitasoft.com/downloads-v2">Bonitasoft site</a> for the Community edition 
    or from the <a href="https://customer.bonitasoft.com/download/request">Customer Portal</a> for Subscription editions.</li>
<li>Unzip the deploy bundle. The path to the unzipped deploy bundle will be referred to as <code><deploy_home></deploy_home></code></li>
<li>Create a new folder to store Bonita "home" folder. For the Community or Subscription edition, copy bonita "home" folder from deploy bundle folder
   (<code><deploy_home>/bonita_home-x.y.z</deploy_home></code>) (where <code>x.y.z</code> is the version number) to the newly created folder. 
   The full path including <code>bonita_home-x.y.z</code>
   will be referred as <code><bonita_home></bonita_home></code>.</li>

<li>Edit <code><bonita_home>/engine-server/conf/platform/bonita-platform-community-custom.properties</bonita_home></code> and update the following properties:
<ul><li>database.journal.datasource.name=bonitaDS</li>
       <li>database.sequence.manager.datasource.name=bonitaSequenceManagerDS</li>
       <li>hibernate.transaction.jta_platform = org.hibernate.service.jta.platform.internal.WeblogicJtaPlatform</li>
       <li>db.vendor=oracle</li>
       <li>transaction.manager=java:comp/UserTransaction</li>
       <li>userTransaction=java:comp/UserTransaction</li>
       </ul></li>

<li>Edit <code><bonita_home>/engine-server/conf/tenants/template/bonita-tenant-sp-custom.properties</bonita_home></code> and update the following property:
<ul><li>database.journal.datasource.name=bonitaDS</li>
       </ul></li>

<li>Edit <code><bonita_home>/engine-server/conf/tenants/tenant-template/bonita-tenant-community-custom.properties</bonita_home></code> and update the following properties:
    <ul><li>bdm.db.vendor=oracle</li>
       <li>bdm.datasource.jndi.path=BusinessDataDS</li>
       <li>bdm.notmanageddatasource.jndi.path=NotManagedBizDataDS</li>
       <li>bdm.hibernate.transaction.jta_platform=org.hibernate.service.jta.platform.internal.WeblogicJtaPlatform</li>
    </ul><p>For each new tenant created, the structure will be as shown above.</p>
</li>


<li>Configure JVM system properties:
   	<ul><li>Edit <code><weblogic_home>/user_projects/domains/<domain_name>/bin/startWebLogic.sh</domain_name></weblogic_home></code> and set: </li></ul><code type="xml">
JAVA_OPTIONS="${SAVE_JAVA_OPTIONS} -Dbonita.home=<bonita_home>"
</bonita_home></code>
       
</li>
<li>Add the license file to your <code><bonita_home></bonita_home></code>folder</li>
   <li>Add SLF4J libraries (API and JDK back-end located in <code><deploy_home>/Tomcat-6.0.37/lib</deploy_home></code>) to bonita.war file to <code>WEB_INF/lib/</code>
   (located in: <code><deploy_home>/Tomcat-6.0.37/webapps</deploy_home></code>).</li>
   
<p><strong>Note:</strong>To add a file to a WAR you can use a tool such as 7-zip or
    command line: <code>jar uf bonita.war WEB-INF/lib/slf4j-api-1.6.1.jar</code>.</p>
<li>Check that the weblogic.xml descriptor is present in <code>bonita.war/WEB-INF</code> folder of the war.</li>
<li>Deploy Bonita war file, as follows:
<ul><li>Connect to WebLogic administration console.</li>
<li>In the tree menu on the left, go to <strong> Deployments</strong>.</li>
<li>Click the <em><strong>Install</strong></em> button.</li>
<li>Browse to the folder of your Deploy Bundle and deploy the bonita.war file provided for Tomcat.</li>
<li>Click  <em><strong>Next</strong></em>.</li>
<li>Select <em><strong>Install this deployment as an application</strong></em>.</li>
<li>Click  <em><strong>Next</strong></em>.</li>
<li>Keep the default settings.</li>
<li>Click  <em><strong>Next</strong></em>.</li>
<li>Click  <em><strong>Finish</strong></em>.</li>
</ul></li></ol><h2>Check the installation</h2>
<ol><li>To verify that the installation was successful and the database is correctly configured, connect to Bonita BPM Portal.
</li><li>In the URL field of your web browser, enter the host address, for example <code>http://localhost:7001/bonita"&gt;http://localhost:7001/bonita</code>.</li>
</ol><p><strong>Note:</strong> If the Bonita BPM Portal login page is not displayed, <a href="http://www.wikihow.com/Clear-Your-Browser's-Cache">empty your browser cache</a> and then reload the page.</p> 

<p>At this stage no organization information is loaded: only the technical user account exists.</p>

<h2>Log in as the Technical user</h2> 
<p>Log in as the <strong>Technical user</strong> in order to create a new user with an Administrator profile.</p>
<p>Note: the Technical user has limited rights in Bonita BPM Portal and exists just to initialize the organization.</p>
<p>The default values for login and password are:</p>
<ul><li>Login = install</li>
<li>Password = install</li>
</ul><p>The login and password are read from the 
<code><bonita_home>/engine-server/conf/tenants/<tenant_id>/bonita-tenant-community-custom.properties
</tenant_id></bonita_home></code>file.</p>
<p>These settings are also located in client side configuration file <code>client/platform/conf/platform-tenant-config.properties</code>.</p>

<h2>Modify the Technical user login and password</h2>
<p>To modify the default Technical user/password, update the following files with the same values:</p>
<ul><li><code>engine-server/conf/tenants/<tenant_id>/bonita-tenant-community-custom.properties</tenant_id></code></li>
<li><code>client/platform/conf/platform-tenant-config.properties</code></li>
</ul><h2>Create an Administrator user</h2>
<p>Note: do not create a user or an administrator with the same login as the technical users (platform and tenant) </p>
<p>To create a user with the "administrator" profile:</p>
<ol><li>Log in to Bonita BPM Portal as the technical user.</li>
    <li>Create a new user.</li>
    <li>Go to <strong>Configuration</strong> /<strong>Profiles</strong>.</li>
    <li>Select the <strong>Administrator</strong> profile.</li> 
    <li>Click on the <strong><em>More</em></strong> button (in the top right corner).</li>
    <li>Under <strong>Users mapping</strong>, click on <strong><em>Add a user</em></strong>.</li>
    <li>Select your user and click on the <strong><em>Add</em></strong> button. Log out as the Technical user and log back in as the newly created user with administrative rights.</li>
    <li>Create <a href="/manage-user-0">users with the standard profile</a>.</li>
    <li>You can add newly created users to the <strong>User</strong> (standard) profile or to a custom profile.</li>
</ol><h4>Information</h4>
<p>If you already have a system that stores information about end users, you can use it to create user accounts in Bonita BPM. </p>
<p>If you use an LDAP or Active Directory system, you can use the <a href="/ldap-synchronizer-3">LDAP synchronizer</a> to keep the Bonita BPM organization synchronized with it.</p>



</div>
	</body></html>
