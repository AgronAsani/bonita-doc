<?xml encoding="UTF-8"><html lang="en-US"><head><meta charset="UTF-8"><title>Manage an organization</title></head><body class="front">
		<div id="content">
	<h1>4.5.5.3 Manage an organization</h1>
    <p>In this page:</p>

<p>
<a href="#org">Import an organization</a><br><a href="#list_groups">List the groups in an organization</a><br><a href="#add_group">Add a group</a><br><a href="#delete_group">Delete a group from the organization</a><br><a href="#add_role">Add a role</a><br><a href="#delete_role">Delete a role from the organization</a></p>

<h2 id="org">Import an organization</h2>

<p>This example explains how to import an organization definition from an XML file into Bonita BPM Engine. </p>

<p>The structure of the XML file is defined in an <a href="/organization-overview-0#XMLSchema">XSD file</a>. 
To see an example of a well-formed XML file for an organization, export the ACME sample organization from Bonita BPM Studio.</p>

<p>In the following example, the organization definition is stored in a file called <code>ACME.xml</code>, which is stored in <code>path</code>. The file content is converted to a string, and then imported.</p>

<code type="java">
final pOrganizationResourceName = &ldquo;path/ACME.xml&rdquo;
final File orgFile = FileUtils.toFile(getClass().getResource(pOrganizationResourceName));
final String orgContent = FileUtils.readFileToString(orgFile, CharEncoding.UTF_8);
getIdentityAPI().importOrganization(orgContent);
</code>

<h2 id="list_groups">List the groups in an organization</h2>

<p>This example shows how to get a list of groups in the current organization.</p>

<p>The search options specify that a maximum of 100 items are listed, starting with the first one.</p>

<p>Only one organization can be loaded in Bonita BPM Engine at a time, so there is no need to specify the organization, and no organization identifier exists.</p>

<code type="java">
final IdentityAPI identityAPI = TenantAPIAccessor.getIdentityAPI(apiSession);
final SearchOptionsBuilder builder = new SearchOptionsBuilder(0, 100);
final SearchResult<group> groupResults = identityAPI(apiSession).searchGroups(builder.done());
</group></code>

<h2 id="add_group">Add a group</h2>

<p>This example shows how to add a group to the current organization.</p>

<code type="java">
final IdentityAPI identityAPI = new IdentityAccessor().getIdentityAPI(apiSession);
final GroupCreator groupCreator = new GroupCreator(name).setDescription(description);
final Group group = identityAPI.createGroup(groupCreator);
</code>


<h2 id="delete_group">Delete a group from the organization</h2>

<p>This example shows how to delete a group from the organization.</p> 

<p>Deleting a group does not delete the users who belong to it. 
However, if the actor assignment for a process uses a group that is deleted, the users who belonged to the will no longer be able to perform tasks.</p>

<code type="java">
final IdentityAPI identityAPI = TenantAPIAccessor.getIdentityAPI(apiSession);
identityAPI.deleteGroup(groupId);
</code>

<h2 id="add_role">Add a role</h2>

<p>This example shows how to add a role to the current organization.</p>
<code type="java">
final IdentityAPI identityAPI = new IdentityAccessor().getIdentityAPI(apiSession);
final RoleCreator roleCreator = new RoleCreator(name).setDescription(description);
final Role role = identityAPI.createRole(roleCreator);
</code>

<h2 id="delete_role">Delete a role from the organization</h2>

<p>This example shows how to delete a role from the organization.</p> 

<p>Deleting a role does not delete the users who have that role. 
However, if the actor assignment for a process uses a role that is deleted, the users who had the role will no longer be able to perform tasks.</p>

<code type="java">
final IdentityAPI identityAPI = TenantAPIAccessor.getIdentityAPI(apiSession);
identityAPI.deleteRole(roleId);
</code>

</div>
	</body></html>
