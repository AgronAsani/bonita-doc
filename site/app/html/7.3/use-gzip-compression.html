<?xml encoding="UTF-8"><html lang="en-US"><head><meta charset="UTF-8"><title>Configure an application server with gzip compression</title></head><body class="front">
		<div id="content">
	<h1>2.4.6 Configure an application server with gzip compression</h1>
    <p>Using gzip compression in your application server can improve performance by reducing network load for some resources. This page describes how to activate gzip compression for a Bonita BPM Platform with Tomcat and with JBoss.</p>

<p><a href="#jboss">JBoss</a><br><a href="#tomcat">Tomcat</a><br><a href="#check">Check changes</a></p>

<h2 id="jboss">JBoss</h2>

<p>To activate compression for JBoss:</p>
    <ul><li>For Linux systems: edit <code>bin/standalone.conf</code> and uncomment this line:</li>
        <code type="java">
JAVA_OPTS=&quot;$JAVA_OPTS -Dorg.apache.coyote.http11.Http11Protocol.COMPRESSION=on&quot; 
        </code>
                <li>For Windows systems: edit <code>bin/standalone.conf.bat</code> and uncomment this line:</li>
        <code type="java">
set &quot;JAVA_OPTS=%JAVA_OPTS% -Dorg.apache.coyote.http11.Http11Protocol.COMPRESSION=on&quot;
        </code>
    </ul><h2 id="tomcat">Tomcat</h2>

<p>To activate gzip compression for http requests, you need to modify the <code>server.xml</code> configuration. </p>

<p>Open <code>server.xml</code> and find the Connector configuration that you use. Edit the section to add following parameters:</p>
<code type="xml">
compression=&quot;on&quot;
compressionMinSize=&quot;X&quot;
noCompressionUserAgents=&quot;Y&quot;
compressableMimeType=&quot;Z&quot;
</code>

<table border="1" cellpadding="2" cellspacing="2" width="100%"><tbody><tr><th valign="top">Property</th>
      <th valign="top">Description</th>
      <th valign="top">Example</th>
    </tr><tr><td valign="top">compression</td>
      <td valign="top">Activates or deactivates gzip compression.</td>
      <td valign="top">on</td>
    </tr><tr><td valign="top">compressionMinSize</td>
      <td valign="top">The minimum size of resources to be compressed. It is not useful to compress resources that are already small.</td>
      <td valign="top">2048</td>
    </tr><tr><td valign="top">noCompressionUserAgents</td>
      <td valign="top">The User Agents for which compressions is not to be used. Some older browseers do not support compression.</td>
      <td valign="top">gozilla, traviata</td>
    </tr><tr><td valign="top">compressableMimeType</td>
      <td valign="top">The MIME types of the resources to be compressed. We recommend that all text files be compressed.</td>
      <td valign="top"> text/html,text/xml</td>
    </tr></tbody></table><p></p>



<p>If you use the Tomcat bundle, the file to edit is <code>conf/server.xml</code>.
If you use a different package, use the corresponding path; for example on Ubuntu the file is located in <code>/etc/tomcat7/server.xml</code>.

</p><p>Connector configuration:</p>

<code type="xml">
<connector port="8080" protocol="HTTP/1.1" connectiontimeout="20000" redirectport="8443" maxpostsize="-1" uriencoding="UTF-8" compression="on" compressionminsize="2048" nocompressionuseragents="gozilla, traviata" compressablemimetype="text/html,text/xml,text/plain,text/javascript,text/css"></connector></code>

<p></p>



<h2 id="check">Check changes</h2>

<p>After you modify the file, restart your application server and test with the following <code>curl</code> command:</p>

<code>curl -I -H &apos;Accept-Encoding: gzip&apos; http://</code><em><code>ip_address:port</code></em><code>/bonita/login.jsp</code>

<p>Check that the header returned contains the line <code>Content-Encoding: gzip</code>. For example, on a JBoss system the output will be similar to this:</p>

<code type="xml">
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Expires: 0
Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
Pragma: no-cache
X-XSS-Protection: 1; mode=block
X-Frame-Options: SAMEORIGIN
X-Content-Type-Options: nosniff
X-Powered-By: JSP/2.2
Content-Type: text/html;charset=UTF-8
Transfer-Encoding: chunked
Content-Encoding: gzip
Vary: Accept-Encoding
</code>


</div>
	</body></html>
