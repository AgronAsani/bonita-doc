<h1>4.3.2 Connector development toolkit</h1>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#install">Installation</a></li>
<li><a href="#creatingConnectorDef">Creating a new connector definition</a></li>
<li><a href="#creatingConnectorImpl">Creating a new connector implementation</a></li>
<li><a href="#widgetTypeReference">Widget types and parameters</a>
<ul>
<li><a href="#mandatory-common">Mandatory common widget parameters</a></li>
<li><a href="#optional-common">Optional common widget parameters</a></li>
<li><a href="#typeRadioGroup">RadioGroup widget parameters</a></li>
<li><a href="#typeSelect">Select widget parameters</a></li>
<li><a href="#typeArray">Array widget parameters</a></li>
<li><a href="#typeList">List widget parameters</a></li>
<li><a href="#typeGroup">Group widget parameters</a></li>
</ul>
</li>
</ul>
<h2>Overview</h2>
<p>The Connector Development Toolkit is a set of tools for implementing and testing Bonita BPM connectors independently of the Bonita BPM Studio.<br>
A connector implemented with the toolkit can be used in Bonita BPM Studio or in Bonita BPM Portal just like any Bonita BPM connector.</p>
<p>This toolkit uses industry-standard tools such as Java IDEs, dependency management tools (Maven), and unit testing frameworks (JUnit, Mockito and AssertJ).
It has the following benefits for connector developers:</p>
<ul>
<li>You can use any Java IDE for implementation, so you have access to all configuration options and can make use of convenient features such as refactoring.</li>
<li>You can unit test connectors, perform integration tests, and automate builds with a CI platforms.</li>
<li>It simplifies refactoring of connector wizards, by enabling them to be regenerated them at any time.</li>
<li>It simplifies dependency management and connector artifact version management, by leveraging Maven capabilities.</li>
</ul>
<h2>Installation</h2>
<h3>Prerequisites</h3>
<p>To develop and test a Bonita BPM connector with the toolkit, you need the following software installed:</p>
<ul>
<li>Java 7 or later</li>
<li>Maven 3.2.x or later</li>
</ul>
<h3>Installation procedure</h3>
<ol>
<li>Download the toolkit from the Customer Portal.</li>
<li>Unzip the toolkit file into a temporary installation folder.</li>
<li>Run either <code>install.bat</code> for Windows users or <code>install.sh</code> for Mac or Linux users.</li>
<li>When the installer has finished, delete the temporary installation folder because you no longer not need.</li>
</ol>
<h2>Creating a new connector definition</h2>
<ol>
<li>Open a command window and navigate to the folder that will hold your connector definition.</li>
<li>Prepare to run the following command (Windows users: remove the trailing slashes and edit the content to have everything on a single line):
<code>mvn archetype:generate \ -DinteractiveMode=false \ -DarchetypeGroupId=com.bonitasoft.connector.definition \ -DarchetypeArtifactId=bonita-connector-definition-archetype \ -DarchetypeVersion=1.0 \ -DgroupId=com.mycompany.connectors \ -DartifactId=myFirstConnector \ -Dversion=1.0.0</code></li>
</ol>
<p>Before running the command, update the following parameter values:
Parameter
Description</p>
<p>archetypeVersion
This must match the version of the toolkit.</p>
<p>groupId
Maven project group id.</p>
<p>artifactId
Maven project artifact id and Bonita BPM connector definition id.</p>
<p>version
Maven project version and Bonita BPM connector definition version.</p>
<ol start="3">
<li>Run the command. This generates a new folder named <code>artifactId</code> containing the connector definition project files, as follows:
<code>/ src/main/resources/ category-icon.png connector_definition.xml connector-icon.png pom.xml</code></li>
<li>Configure the <code>src/main/resources/connector_definition.xml</code> file to define the connector wizard pages with their inputs, widgets,and outputs
(see <a href="#widgetTypeReference">Connector widget reference</a> for details).</li>
<li>Optionally, change the icons for the connector and the connector category in the <code>src/main/resources</code> folder.</li>
</ol>
<h2>Creating a new connector implementation</h2>
<p>A connector definition can hold multiple implementations so the steps described in this section can be repeated.<br>
All implementations will be stored under the definition project folder.</p>
<p><strong>Caution:</strong> Connector implementations that are not located under the definition project folder will not compile.</p>
<ol>
<li>Open a command window and navigate to the folder that contains the connector definition project.</li>
<li>Prepare to run the following command (Windows users: remove the trailing slashes and edit the content to have everything on a single line):
<code>mvn archetype:generate \ -DinteractiveMode=false \ -DarchetypeGroupId=com.bonitasoft.connector.implementation \ -DarchetypeArtifactId=bonita-connector-implementation-archetype \ -DarchetypeVersion=1.0 \ -DgroupId=com.mycompany.connectors \ -DartifactId=myFirstConnectorImpl \ -Dversion=1.0.0 \ -DdefinitionId=myFirstConnector \ -DdefinitionVersion=1.0.0</code></li>
</ol>
<p>Before running the command, update the following parameter values:
Parameter
Description</p>
<p>archetypeVersion
This should match the version of the toolkit.</p>
<p>groupId
Maven project group id and Java package for the Bonita BPM connector implementation.</p>
<p>artifactId
Maven artifact id and Bonita BPM connector implementation id.</p>
<p>version
Maven version id and Bonita BPM connector implementation version.</p>
<p>definitionId
This should match the connector definition artifactId.</p>
<p>definitionVersion
This should match the connector definition version.</p>
<ol start="3">
<li>Run the command. This generates a new folder named <code>artifactId</code> containing the connector implementation project.</li>
<li></li>
</ol>
<p>In the connector implementation project folder, run the following command :
<code>mvn bonita-connector-definition:generate</code></p>
<p>This generates the connector abstract definition class based on the definition configuration:
<code>/src/main/java//Abstract.java</code></p>
<p><strong>Note:</strong>
If you subsequently change the connector definition configuration, run this command again to apply your changes.<br>
This will regenerate the abstract definition class, overwriting the previous version.</p>
<ol start="5">
<li></li>
</ol>
<p>In the connector implementation project folder, run the following command :
<code>mvn bonita-connector-implementation:generate</code></p>
<p>This generates a stub of the connector implementation and test classes:
<code>src/main/java//.java src/test/java//Tests.java</code></p>
<p><strong>Caution:</strong> Do not run this command again at a later stage, because it resets your implementation and test classes.</p>
<ol start="6">
<li>Complete your connector implementation and test classes.</li>
<li></li>
</ol>
<p>When you are ready to package the connector, run this command in the implementation project folder:
<code>mvn package</code></p>
<p>This will produce a connector zip file that can be imported in Bonita BPM Studio:
<code>/target/--dist.zip</code></p>
<h2>Widget types and parameters</h2>
<p>The following widget types are supported in connectors:
Widget
Description</p>
<p>Text
Text field</p>
<p>Password
Text field with obfuscated characters</p>
<p>TextArea
Multi-line text field</p>
<p>Checkbox
Single checkbox</p>
<p>RadioGroup
Group of radio buttons</p>
<p>Select
Drop down</p>
<p>Array
Editable table with user customizable rows and columns</p>
<p>ScriptEditor
Multi-line text zone for entering a script</p>
<p>List
List in which user can add/remove elements</p>
<p>Group
Collapsile zone that contains one or more widgets</p>
<p>This is the same as the set of connector widgets available Bonita BPM Studio.</p>
<p>A widget is configured by setting parameters. Some <a href="#mandatory-common">mandatory parameters</a> and <a href="#optional-common">optional parameters</a> are common to all types of widget.
There are also some specific widget properties for some types of widget, which are listed later in this page.</p>
<h3>Mandatory common widget parameters</h3>
<p>Parameter
Description</p>
<p>id
Unique widget identifier.</p>
<p>label
Text displayed beside the widget.</p>
<p>widgetType
Type of the widget. Set this to Text, Password, TextArea, Checkbox, RadioGroup, Select, Array, ScriptEditor, List, or Group.</p>
<p>javaType
Java type used to assign the value of this widget. This is not supported for Group widgets.</p>
<h3>Optional common widget parameters</h3>
<p>Parameter
Description
Default value</p>
<p>mandatory
Boolean flag that indicates whether or not this widget can be left empty.
true</p>
<p>defaultValue
Default value assigned to this widget.
n/a</p>
<p>description
Mouseover text displayed by the 'information' icon beside the widget. If there is no description, the icon is not displayed.
n/a</p>
<p>The following example is the configuration for a Text widget:
<code>firstNameFirst name Textjava.lang.StringtrueJohnYour first name</code></p>
<h3>RadioGroup widget parameters</h3>
<p>Parameter
Mandatory
Description
Default value</p>
<p>choices
yes
List of values for the radio button group. Each value is specified in a &quot;choice&quot; tag.
n/a</p>
<p>orientation
no
Alignment of the widget values. One of: HORIZONTAL or VERTICAL.
VERTICAL</p>
<p>The following example is the configuration for a RadioGroup widget with three choices:
<code>radioGroupRadioGroup widget java.lang.StringRadioGroupChoice1Choice2Choice3VERTICAL</code></p>
<h3>Select widget parameters</h3>
<p>Parameter
Mandatory
Description
Default value</p>
<p>items
yes
List of values for the widget. Each value is specified in an &quot;item&quot; tag.
n/a</p>
<p>The following example is the configuration for a Select widget with three choices:
<code>selectSelect widget java.lang.StringSelectItem1Item2Item3</code></p>
<h3>Array widget specific parameters</h3>
<p>All Array widget specific parameters are mandatory and must be placed under a single parent &quot;arrayOptions&quot; tag.
Parameter
Description</p>
<p>cols
Initial number of columns in the table.</p>
<p>rows
Initial number of rows in the table. A value of -1 indicates a table with no row (only the column headers are displayed).</p>
<p>fixedCols
Boolean flag that indicates whether the number of table columns can be modified by the end user. If set to &quot;true&quot;, the user cannot add or remove columns.</p>
<p>fixedRows
Boolean flag that indicates whether the number of table rows can be modified by the end user. If set to &quot;true&quot;, the user cannot add or remove rows.</p>
<p>colsCaption
List of captions for the column headers. Each caption is specified in a &quot;colsCaption&quot; tag.</p>
<p>The following example is the configuration for an Array widget two columns and any number of rows:
<code>arrayArray widget java.util.ListArray2-1truefalseHeader 1Header 2</code></p>
<h3>List widget specific parameters</h3>
<p>Parameter
Mandatory
Description
Default value</p>
<p>showDocuments
no
Boolean flag that indicates whether the end user can select Bonita BPM documents in the list of values.
false</p>
<p>The following example is the configuration for a List widget:
<code>listList widget java.util.ListListtrue</code></p>
<h3>Group widget parameters</h3>
<p><strong>Note:</strong> A Group widget does not support the common &quot;javaType&quot; parameter.
Parameter
Description</p>
<p>collapsed
Boolean flag that indicates whether the group is collapsed by default.</p>
<p>widgets
Specifies the list of widgets contained in the group.</p>
<p>The following example is the configuration for a Group widget that contains two other widgets:
<code>credentialsGroupUser credentials trueloginjava.lang.StringtrueTextLogin passwordjava.lang.StringtruePasswordPassword</code></p>
