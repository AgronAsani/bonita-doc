<style type="text/css">/** https://gist.github.com/andyferra/2554919#file-github-css **/
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url("../../images/modules/styleguide/para.png") no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url("../../images/modules/pulls/dirty-shade.png") repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0; }

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }

ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

ul :last-child, ol :last-child {
  margin-bottom: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      text-align: left;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      text-align: left;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

pre {
  background-color: #073642;
  color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

</style><link rel="stylesheet" href="http://yandex.st/highlightjs/8.0/styles/solarized_dark.min.css">
<h1 id="4-4-rest-api-overview">4.4 REST API overview</h1>
<p>This page contains an overview of how to integrate an application with Bonita BPM using REST.</p>
<p><a href="#overview">Overview</a><br><a href="#authentication">Authentication</a><br><a href="#execution">Execution</a><br><a href="#log_out">Log out</a><br><a href="#api_extensions">API Extensions</a><br><a href="#create">Create a resource</a><br><a href="#read">Read a resource</a><br><a href="#update">Update a resource</a><br><a href="#delete">Delete resources</a><br><a href="#standard_search_params">Search for a resource</a></p>
<h2 id="overview">Overview</h2>
<p>If your application is using a technology other than Java, you can integrate it with the Bonita BPM solution using the Web REST API. This API provides access to all Bonita BPM objects (like processes, tasks, users, connectors etc.), to execute operations on them (create, retrieve, update, delete). You can use these operations to create a workflow with Bonita BPM and integrate it into your application. The Bonita BPM Engine remains responsible for executing the workflow logic (connectors, gateways with conditions, messages, timers etc.) while your application gives access to the workflow. Users can manage processes and tasks, and perform administrative activities.</p>
<p>Access to the Web REST API depends on <a href="/rest-api-authorization.md">REST API authorization</a> settings.</p>
<p><img src="images/images-6_0/rest_overview.png" alt="diagram of architecture of a REST client integrated with Bonita BPM"></p>
<p>Bonita BPM REST architecture</p>
<h2 id="phases-of-operation">Phases of operation</h2>
<p>There are three phases of operation for an application that is integrated with Bonita BPM through the Web REST API: authentication, execution, and logout.</p>
<h3 id="authenticate-to-bonita-bpm">Authenticate to Bonita BPM</h3>
<p>Calls to the Web REST API require you to first log in as a user registered in the Engine database.</p>
<p>To log in, use the following request:
Request URL</p>
<p><code>http://host:port/bonita/loginservice</code></p>
<p>Request Method</p>
<p>POST</p>
<p>Form Data</p>
<p>username: a username  </p>
<p>password: a password  </p>
<p>redirect: true or false  </p>
<p>redirectURL: the URL of the page to be displayed after login  </p>
<p>tenant: the tenant to log in to (optional for Teamwork, Efficiency, and Performance editions, not supported for the Community edition)</p>
<p>This call generates a cookie, which must be set on each subsequent call. If the Web REST is being used in an application running in a web browser, this is handled automatically by the browser. </p>
<p>Setting the redirect parameter to false indicates that the service should not redirect to Bonita BPM Portal (after a successful login) or to the login page (after a login failure).</p>
<h3 id="execute-rest-calls-and-integrate-the-results-in-your-application">Execute REST calls and integrate the results in your application</h3>
<p>After the application is connected to the Bonita BPM Engine, you can start calling API methods. The following is a typical scenario for an end user.</p>
<ol>
<li><a href="/bpm-api-849#case">Start a new case with variables</a>: Provide a form for the user to enter initial data. Then call the method to start a new case using the values entered by the user to initialize some variables. The engine will start the execution of the process. Depending on the design of your process, there might then be some human tasks available for the end user.</li>
<li><a href="/bpm-api-849#humantask">List the pending tasks for a user</a>: Retrieve a list of available human tasks for the logged in user. When the user selects a task to do, you can display the corresponding form. It can be an external form or a Bonita BPM form that can be accessed by url.</li>
<li><a href="/bpm-api-849#activity">Update variables and execute a task</a>: If your application is using an external form, update the values of the variables in your process. 
You can use a method to update process or activity variables with values coming from your application. When the user submits the external form, you can call a method to execute a task. 
The engine will then continue the execution of the workflow as designed.</li>
<li><a href="/bpm-api-849#connectorinstance">Handle tasks in error</a>: Get a list of tasks that are in the failed state, and then replay each task by doing three steps: get the list of failed connectors, reset the state of failed connectors and replay the failed task.</li>
</ol>
<h3 id="logout-from-bonita-bpm">Logout from Bonita BPM</h3>
<p>When processing is complete, you must log out.</p>
<p>To log out, use the following request:</p>
<p>Request URL</p>
<p><code>http://host:port/bonita/logoutservice</code></p>
<p>Request Method</p>
<p>GET</p>
<p>Form Data</p>
<p>redirect: true or false</p>
<p>Setting the redirect parameter to false indicates that the service should not redirect to the login page after logging out.</p>
<h2 id="api-extensions">API Extensions</h2>
<p>You can create <a href="/rest-api-extensions">Rest API Extensions</a> to extend the Rest API by adding missing ressources (not provided by the Rest API). 
It is possible for an extension to interact with the engine (via the API) or with any other external service (for example a database, a directory, or a web service).</p>
<h2 id="create-a-resource">Create a resource</h2>
<p>Request URL
<code>http://.../API/{API_name}/{resource_name}/</code></p>
<p>Request Method
POST </p>
<p>Request Payload
an item in JSON</p>
<p>Response
the same item in JSON, containing the values provided in the posted item, completed with default values and identifiers provided by Bonita BPM Engine.</p>
<h2 id="read-a-resource">Read a resource</h2>
<p>Example: ``</p>
<p>Request URL
<code>http://.../API/{API_name}/{resource_name}/{id}</code></p>
<p>Request Method
GET</p>
<p>Response
an item in JSON</p>
<p>Example
<code>http://.../API/identity/user/5</code></p>
<h3 id="with-compound-identifier">With compound identifier</h3>
<p>The order of the identifier parts for each resource type is given in the table above.</p>
<p>Request URL
<code>http://.../API/{API_name}/{resource_name}/{id_part1}/{id_part2}</code></p>
<p>Request Method
GET </p>
<p>Response
an item in JSON</p>
<p>Example
<code>&gt;http://.../API/identity/membership/5/12/24</code></p>
<h2 id="update-a-resource">Update a resource</h2>
<p>Request URL
<code>http://.../API/{API_name}/{resource_name}/{id}</code></p>
<p>Request Method
PUT </p>
<p>Request Payload
a map in JSON containing the new values for the attributes you want to change.</p>
<p>Response
the corresponding item in JSON with new values where you requested a modification</p>
<p>Example
<code>http://.../API/identity/user/5</code></p>
<h3 id="with-compound-identifier-">With compound identifier:</h3>
<p>Response: the corresponding item in JSON with new values where you requested a modification.
Request URL
<code>http://.../API/{API_name}/{resource_name}/{id_part1}/{id_part2}</code></p>
<p>Request Method
PUT </p>
<p>Request Payload
<code>a map in JSON containing the new values for the attributes you want to change</code></p>
<p>Response
<code>the corresponding item in JSON with new values where you requested a modification</code></p>
<p>Example
<code>http://.../API/identity/membership/5/12/24</code></p>
<h2 id="delete-resources">Delete resources</h2>
<p>Use the DELETE request to remove multiple resources.</p>
<p>Request URL
<code>http://.../API/{API_name}/{resource_name}/</code></p>
<p>Request Method
DELETE </p>
<p>Request Payload
A list of identifiers in JSON, for example <code>[&quot;id1&quot;,&quot;id2&quot;,&quot;id3&quot;]</code>. Compound identifiers are separated by &#39;/&#39; characters.</p>
<p>Response
<code>empty</code></p>
<p>Example
<code>http://.../API/identity/membership/</code></p>
<h2 id="search-for-a-resource">Search for a resource</h2>
<p>The required object is specified with a set of filters in the request URL. The URL parameters must be URL-encoded.</p>
<p>Results are returned in a paged list, and you can specify the page (counting from zero), the number of results per page (count), and the sort key (order). You can see the total number of matching results in the HTTP response header Content-Range.
If you are searching for business data using a custom query, there must be a <a href="/business-data-model-863#queries">count query in the BDM</a>. If there is no count query, results from a custom query on business data cannot be paged properly (the header Content-Range will be absent). 
For business data default queries, the count query is defined automatically.</p>
<p>The available filters are the attributes of the item plus some specific filters defined by each item.
Request URL
<code>http://.../API/{API_name}/{resource_name}?p={page}&amp;c={count}&amp;o={order}&amp;s={query}&amp;f={filter_name}={filter_value}&amp;f=...</code></p>
<p>Request Method
GET </p>
<p>Response
an array of items in JSON</p>
<p>Example
<code>http://.../API/identity/user?p=0&amp;c=10&amp;o=firstname&amp;s=test&amp;f[]=manager_id:3</code></p>
<p>For a GET method that retrieves more than one instance of a resource, you can specify the following request parameters:</p>
<ul>
<li>p: index of the page to display</li>
<li>c: maximum number of elements to retrieve</li>
<li>o: order of presentation of values in response: must be either attributeName ASC or attributeName DESC. The final order parameter value must be URL encoded. 
The order attributeNames are the same as those you get in the object representation returned in the response.</li>
</ul>
<ul>
<li><p>f: list of filters, specified as attributeName=attributeValue. To filter on more than one attribute, specify an f parameters for each attribute. The final filter parameter value must be URL encoded. 
The attributes you can filter on are specific to the resource.</p>
</li>
<li><p>s: search on name or search indexes. The matching policy depends on the configuration of <a href="/list-and-search.md#word_based_search">word-based search</a>. 
For example, if word-based search is enabled, <code>s=Valid</code> returns matches containing the string &quot;valid&quot; at the start of any word in the attribute value word, 
such as &quot;Valid address&quot;, &quot;Not a valid address&quot;, and &quot;Validated request&quot; but not &quot;Invalid request&quot;.
If word-based search is disabled, <code>s=Valid</code> returns matches containing the string &quot;valid&quot; at the start of the attribute value, such as &quot;Valid address&quot; or &quot;Validated request&quot; but not &quot;Not a valid address&quot; or &quot;Invalid request&quot;.</p>
</li>
<li><p>d: the list of attributes for which you want to make an extended request (called a deploy) and retrieve attributes of a linked resource. 
This means that instead of retrieving the ID or a parent or referenced resource, you can retrieve the full object. 
For example, when you retrieve a task, you can also retrieve the process definition attributes in addition to the process definition ID that is already part of the task resource. 
The supported deploy values for a task include its process (d=processId).<script src="http://yandex.st/highlightjs/8.0/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script></p>
</li>
</ul>
